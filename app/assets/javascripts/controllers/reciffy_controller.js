reciffy.controller( 'ReciffyCtrl', [
  '$scope',
  '$rootScope',
  'FlashService',
  function(
    $scope,
    $rootScope,
    FlashService) {

  // Get a reference to the flash message object
  $scope.flash = FlashService.getFlash();

  $rootScope.$on('$stateChangeSuccess', function() {
    // Get any flash messages generated by rails
    FlashService.retrieveFlash();

    // Close the pure-drawer if it is open
    if ( $(':checkbox:checked').length > 0 ) {
      $('.pure-toggle').trigger('click');
    }
  });
}]);
